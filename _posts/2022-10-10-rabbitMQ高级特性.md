---
layout:     post
title:      rabbitMQ高级特性
subtitle:   rabbitMQ
date:       2022-10-10
author:     
header-img: img/post-bg-alibaba.jpg
catalog: true
tags:
    - 中间件
---

rabbitMQ的八大特性
当前案例，是直接使用 laravel 中 对rabbitMQ的扩展包进行实现操作

案例源码：
git clone git@gitee.com:dear-q/rabbitmq-demo.git

参考文献：

RabbitMQ各方法详解 :
https://blog.csdn.net/qq_34272964/java/article/details/103937896

中文文档：
https://rabbitmq.shujuwajue.com/ying-yong-jiao-cheng/php-ban/2-work_queues.md

#### 八大特性：

    1、ACK（confirm机制）
    2、如何保证消息百分百投递成功
    3、幂等性
    4、return机制
    5、限流
    6、重回队列
    7、TTL
    8、死信队列

#### 能解决的问题

    * 生产者消息送达失败
    * 重复消费
    * 消息没有成功消费
    * 消息N年后一直没有被销毁
    * 高并发
    * 消息丢失后无法找回
    
    
#### 1 . ACK（confirm机制）
### 1.1 什么是Confirm机制

    Pro发送消息到MQ，MQ接收到消息后，产生回响应给Pro，Pro中有一个Confirm Listener异步监听响应应答

步骤：

* 消息的确认 Pro投递消息后,如果MQ收到消息，则会给Pro一个应答
*Pro接收应答 用来确定这条消息是否正常地发送到MQ，该法也是消息可靠性投递的核心保障!
  
1.2 Confirm机制流程图


1.3 实现Confirm机制

1、在channel上开启确认模式：$channel->confirm_select();
2、在channel上添加监听：$channel->wait_for_pending_acks();监听成功和失败的返回结果，根据具体的结果对消息进行重新发送、或记录日志等后续处理。

